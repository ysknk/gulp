//- mixin blocks initialize
- var blocks = {};
mixin set(key)
  - blocks[key] = this.block

//- inline side space disable
mixin inline(tag, name, attr)
  - if(name)
    <#{tag} class="#{name}"!{(attr ? ' ' + attr : '')}>
  - else
    <#{tag}!{(attr ? ' ' + attr : '')}>
  if block
    block
  </#{tag}>

//- responsive img
mixin img_device_src(path, alt)
  img(src=src + "pc" + path data-pc-src=src + "pc" + path data-sp-src=src + "sp" + path alt!=alt)

//- img
mixin img_src(path, alt)
  img(src=src + path alt!=alt)

//- section
//- ex) +section('hoge')
mixin section(name, tag="section", type="local", indent="              ")
  != `\n${indent}<!-- #${name}-->`
  #{tag}(id=name class=type + '-parts ' + type + "-" + name)&attributes(attributes)
    div(class=type + "-" + name + "-inner" + ' ' + type + "-parts-inner")
      if block
        block
      else
        p No content provided
  != `\n${indent}<!-- /#${name}-->`

//- sns
//- ex) +set_sns(['tw', 'fb', 'gp', 'line'], og.url, twitter.description)
mixin set_sns(btn, txt=og.url, url=twitter.description)
  ul
    - for(var i = 0; btn.length > i; i++)
      - if(btn[i] == 'tw')
        <li class="twitter">
        a(href="https://twitter.com/share" class="twitter-share-button" data-url=url data-text=txt) Tweet
        script.
          !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
        </li>

      - if(btn[i] == 'fb')
        <li class="facebook">
        .fb-like(data-href=url data-layout="button" data-action="like" data-show-faces="false" data-share="false")
        </li>
      - if(btn[i] == 'gp')
        <li class="googleplus">
        .g-plusone(data-size="medium" data-annotation="bubble" data-href=url)
        script(src="https://apis.google.com/js/platform.js" async defer).
          {lang: 'ja'}
        </li>
      - if(btn[i] == 'line')
        <li class="line">
        span
          script(type="text/javascript" src="//media.line.me/js/line-button.js?v=20140411")
          script(type="text/javascript").
            new media_line_me.LineButton({"pc":false,"lang":"ja","type":"a","text":txt,"withUrl":true});
        </li>

